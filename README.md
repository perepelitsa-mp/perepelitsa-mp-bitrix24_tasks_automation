 # Скрипт автоматизации корпоративной адаптации

## Описание
Скрипт автоматизирует процесс корпоративной адаптации новых сотрудников в Битрикс24. Он создает структурированный набор задач на основе шаблонов, назначает ответственных и наблюдателей, а также отправляет уведомления.

## Функциональность

### Основные возможности
- Создание основной задачи адаптации
- Автоматическое создание дочерних задач
- Назначение руководителя наблюдателем
- Отправка уведомлений новому сотруднику

### Процесс работы
1. Получение списка дочерних шаблонов задач
2. Создание основной задачи адаптации
3. Создание дочерних задач с привязкой к основной
4. Добавление руководителя в наблюдатели всех задач
5. Отправка уведомления сотруднику

## Технические детали

### Требования
- Битрикс24
- Модуль задач
- Модуль интранета

### Конфигурация
Необходимо определить следующие константы в `config.php`:
```php
define('ADAPTATION_ROOT_TEMPLATE_ID', 77);  // ID корневого шаблона задачи
define('SYSTEM_USER_ID', 777);            // ID системного пользователя
define('SITE_URL', 'https://example.ru'); // URL сайта
```

### Структура кода

#### Основные функции
- `getBoss($userId, $num=1)` - получение руководителя пользователя
- `getBossIgnoreTrips($userId)` - получение руководителя с учетом командировок
- `getSecondUserAgreement($userId)` - получение второго согласующего

#### Ключевые переменные
- `$rootId` - ID корневого шаблона задачи
- `$userId` - ID пользователя, для которого создаются задачи
- `$starter` - ID пользователя, от имени которого создаются задачи


## Интеграция
Скрипт интегрируется со следующими системами:
- Модуль задач Битрикс24
- Система уведомлений Битрикс24
- Корпоративная структура (для получения руководителя)

## Использование
1. Подготовить конфигурационный файл с необходимыми константами
2. Убедиться в наличии всех необходимых модулей
3. Запустить скрипт с параметром ID нового сотрудника
